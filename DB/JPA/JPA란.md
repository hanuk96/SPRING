## JPA(JAVA Persistence api)

- Connection pool: DB의 connection에 대한 객체를 일정량 모아둔 Pool을 생성하고 재활용하는 방식
  - JNDI lookup(Connection객체의 이름을 가짐)을 통해서 DB와 연관된 datasource를 얻는다
  - datasource(Connection pool을 관리하는 목적으로 사용되는 객체)에 맞는 connection을 connection pool에 요청한다
  - conncetion pool에서 connection과 관련된 어플리케이션을 실행
  
- Api: 서버와 서버 사이를 연결해주는 interface
  - 인터페이스: 상하관계가 존재하는 약속
  - 프로토콜: 동등한 관계에서의 약속
  
- ORM: 객체(클래스)와 관계형 데이터베이스(테이블)를 자동으로 mapping해주는 것

- 하이버네이트: 자바를 위한 ORM프레임워크로 JPA인터페이스를 구현하며 JDBC API를 사용한다

- 반복적인 CRUD작업을 줄여줌(함수를 이용함)

- context: 대상에대한 모든 정보를 가지고 있는것
  - 영속성 context와 db는 동기화
  
- oop관점에서 모델링을 가능하게 해준다(상속, composition, 연관관계)

- sql mapper와의 비교

  |            | SQL Mapper                      | JPA                                                          |
  | ---------- | ------------------------------- | ------------------------------------------------------------ |
  | RDB의 종류 | 특정 DB에 종속적임              | 종속적이지 않아 쿼리에 집중할 필요없음(dialect library를 이용한다) |
  | 난이도     | 세부적인 SQL 쿼리를 사용해 쉬움 | 어려움                                                       |
  | 수정       | 설정 변경시 수정사항이 많다     | 기본적인 CRUD의 제공으로 비즈니스 로직에 집중 가능           |

  

- 단순히 SQL을 개발자 대신 생성해주는것 뿐 아니라 자바의 객체형, 관계형 DB의 패러다임의 불일치를 개발자 대신 해결해준다

- 자바 ORM기술에 대한 API 표준 명세라고 할 수 있다

- JPA를 사용해야하는 이유?
  - 생산성 : 자바 컬렉션에 객체를 저장하듯이 JPA에게 저장할 객체를 전달하면 된다(반복적인 CRUD를 JPA가 대신 해줌)
  - 유지보수 : 스키마를 변경하여, 엔티티에 필드를 하나만 추가하려고 해도, SQL을 이용한 매퍼를 이용하게되면 모든 SQL을 변경해야했지만, JPA는 대신 이를 처리해주므로 수정해야할 코드가 줄어든다.
  - 패러다임의 불일치를 해결해준다(객체지향과 관계형 DB의 불일치)
  - 성능 : 성능 최적화의 기회를 제공한다. 여러번 데이터베이스와 통신해야할 작업을 객체를 통해서 한번의 통신을 통해 재사용 할 수 있어서 최적화가 가능함
  - 데이터 접근 추상화와 벤더 독립성 : APPLICATION과 DB사이에 추상화된 영속성 컨텍스트를 이용하여 특정 DB에 종속되지 않도록 해준다
  - 표준 : JPA는 자바진영의 ORM 표준 기술이다
  
- JPA를 이용하게되면, 엔티티 중심으로 개발자는 개발을 해야하기 때문에 모든 데이터를 엔티티로 변경한 후에 검색해야하는데 이는 불가능하다. 그래서 JPQL을 지원하여 검색조건이 포함된 SQL을 사용한다.
